<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // let str = `a: function test333<T>(a, b = '111', ...d: string[]):number{`
      // let str = `b: function ss<T>(a, b = '111', ...d: string[]): T{`
      // let str = `test333<T>(a, b = '111', ...d: string[]){`
      // let str = `dd: number, cc = test2([ 1, 2 ], { a: 'ccc', d: 'ddd' }),bb: string = '2', name1, name = '2', c?: number[][], x: { suit: string, card: number }[], readonly name3: string, public scale: number, [first, second]: [number, number], k, { a, b = 0 } = { a: '' }, ...d: string[]`
      let str = `string $message, string $url= '', int $b = 3, bool $c = true, $types = array("cappuccino"), ...$numbers, $coffeeMaker = NULL, &$string, DateInterval ...$intervals, `
      const reg = /\s*([...\s]*)((\w+)\s+)?(\$[$\w]*)[^,]*/g

      let res
      let paramsArr = [] // 参数列表
      let num = 0
      // 捕获函数参数
      while ((res = reg.exec(str))) {
        if (!res) break
        console.log('exec', res)
        const obj = {
          type: '*',
          param: res[2],
        }
        if (res[1].startsWith('...')) {
          obj.type = 'array'
        }
        paramsArr.push(obj)
      }
      console.log('paramsArr res', res, paramsArr)
    </script>
  </body>
</html>
